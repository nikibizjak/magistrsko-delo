%\chapter{Implementacija}
%\label{ch:implementacija}
%
%% Naša prevajalnik temelji na 
%% Naš prevajalnik:
%%   * razčlenjevanje (angl. parsing)
%%   * semantična analiza
%
%V fazi semantične analize prevajalnik izvede najprej razreševanje imen (angl. name resolution), ki mu sledita analiza izposoj (angl. borrow check) in premikov (angl. move check).
%
%Pri razreševanju imen prevajalnik preveri, ali so vsa imena spremenljivk definirana pred njihovo uporabo. Prevajalnik se v tej fazi rekurzivno sprehodi čez abstraktno sintaksno drevo STG jezika. Pri tem vzdržuje kontekst trenutno živih spremenljivk. Pri uporabi spremenljivk prevajalnik preveri, ali se ime nahaja v kontekstu in v nasprotnem primeru vrne napako. Če se proces razreševanja imen zaključi brez napake, je zagotovljeno, da tekom izvajanja programa ne bo prišlo do napake zaradi uporabe nedefinirane spremenljivke.
%
%Pri analizi izposoj prevajalnik zagotovi, da izposoja ne živi dlje od spremenljivke, ki jo referencira. 
%
%\begin{stgcode}
%	-- Glavna funkcija
%	main = THUNK(
%	let a = THUNK(12) in
%	&a
%	)
%\end{stgcode}
%
%\begin{figure}[ht]
%	\centering
%	\begin{tikzpicture}
%		\tikzset{
%			every node/.append style={text width=1.4cm,execute at begin node=\setlength{\baselineskip}{1em},font=\footnotesize},
%			block/.style={draw,rectangle,text width=2cm,align=center,minimum height=1cm,minimum width=2cm},
%		}
%		
%		\node[block] (parser) {\textbf{Razčlen\-jevanje}};
%		
%		\node[coordinate, left=0.5cm of parser.west] (levo-od-parser) {};
%		
%		\node[block,right=1cm of parser] (borrow-checker) {Analiza izposoj};
%		\node[block, above=0.5cm of borrow-checker] (name-resolution) {\textbf{Raz\-re\-še\-van\-je imen}};
%		\node[block, below=0.5cm of borrow-checker] (move-checker) {Analiza premikov};
%		\node[block, right=1cm of borrow-checker] (interpreter) {\textbf{Abstraktni stroj STG'}};
%		
%		\node[coordinate, right=0.5cm of interpreter.east] (desno-od-interpreter) {};
%		
%		% Input arrow
%		\draw[->] (levo-od-parser) -- (parser) node[above, pos=-0.25,align=center] {\scriptsize tok\\znakov};
%		
%		% Output arrow
%		\draw[->] (interpreter) -- (desno-od-interpreter) node[above,pos=1.25,align=center] {\scriptsize rezultat};
%		
%		% Parser -> name resolution arrow
%		\node[coordinate, right=0.3cm of parser.east] (desno-od-parser) {};
%		\node[coordinate] at (desno-od-parser |- name-resolution) (levo-od-name-resolution) {};	
%		\draw[->] (parser) -- (desno-od-parser) -- node[align=center,sloped,anchor=center,above,pos=0.75] {\scriptsize STG} (levo-od-name-resolution) -- (name-resolution);
%		
%		% Move checker -> abstract STG machine arrow
%		\node[coordinate, left=0.3 of interpreter.west] (levo-od-interpreter) {};
%		\node[coordinate] at (move-checker -| levo-od-interpreter) (desno-od-move-checker) {};
%		\draw[->] (move-checker.east) -- (desno-od-move-checker) -- node[align=center,sloped,anchor=center,below,pos=0.25] {\scriptsize STG'} (levo-od-interpreter) -- (interpreter);
%		
%		% 
%		\draw[->] (name-resolution) -- node[pos=0.5,right] {\scriptsize STG} (borrow-checker);
%		\draw[->] (borrow-checker) -- node[pos=0.5,right] {\scriptsize STG'} (move-checker);
%		
%		% Oznake za semantično analizo
%		\node[coordinate, above=0.4 of name-resolution.north] (top) {};
%		\node[coordinate, below=0.4 of move-checker.south] (bottom) {};
%		
%		\node[coordinate, left=0.5 of borrow-checker.west] (semanticna-analiza-levo) {};
%		\node[coordinate, right=0.5 of borrow-checker.east] (semanticna-analiza-desno) {};
%		
%		\node[coordinate] at (semanticna-analiza-levo |- top) (semanticna-analiza-levo-zgoraj) {};
%		\node[coordinate] at (semanticna-analiza-levo |- bottom) (semanticna-analiza-levo-spodaj) {};
%		
%		\node[coordinate] at (semanticna-analiza-desno |- top) (semanticna-analiza-desno-zgoraj) {};
%		\node[coordinate] at (semanticna-analiza-desno |- bottom) (semanticna-analiza-desno-spodaj) {};
%		
%		\draw[-,dashed] (semanticna-analiza-levo-zgoraj) -- (semanticna-analiza-levo-spodaj) -- (semanticna-analiza-desno-spodaj) -- (semanticna-analiza-desno-zgoraj) -- (semanticna-analiza-levo-zgoraj);
%		
%		\path (semanticna-analiza-levo-zgoraj) -- node[above=0.1,align=center,text width=3cm] {Semantična analiza} (semanticna-analiza-desno-zgoraj);
%		
%	\end{tikzpicture}
%	\caption{Faze implementirane prevajalnika}
%	\label{fig:shema-implementacije}
%\end{figure}
%
%\section{Analiza izposoj}
%
%\section{Analiza premikov}
%
%% \chapter{Rezultati}
%% \label{ch:rezultati}
%
%% Za potrebe naše magistrske naloge bomo v izbranem programskem jeziku implementirali simulator STG stroja. V programskem jeziku STG bomo napisali zbirko programov, s pomočjo katerih bomo testirali uspešnost implementirane metode. Merili bomo količino dodeljenega pomnilnika in količino sproščenega pomnilnika in skušali ugotoviti, ali je ves pomnilnik pravočasno sproščen. Cilj magistrskega dela ni izdelava učinkovite implementacije čiščenja pomnilnika, temveč skušati ugotoviti, kakšne spremembe in analize je potrebno dodati v STG stroj, da bo lahko uporabljal princip lastništva namesto čistilca pomnilnika.

\chapter{Zaključek}
\label{ch:zakljucek}

Pri magistrskem delu nam je uspelo implementirati izvajalno okolje za STG jezik.